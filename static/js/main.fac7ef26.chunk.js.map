{"version":3,"sources":["components/Rooms/Rooms.module.css","components/Chat.module.css","config/events.ts","context/socket.context.tsx","config/default.ts","components/Messages/Messages.tsx","components/Rooms/Rooms.tsx","components/Chat.tsx","App.tsx","index.tsx","components/Messages/Messages.module.css"],"names":["module","exports","EVENTS","CREATE_ROOM","SEND_ROOM_MESSAGE","JOIN_ROOM","ROOMS","JOINED_ROOM","ROOM_MESSAGE","socket","io","SocketsContext","createContext","setUsername","roomsList","messages","setMessages","useSockets","useContext","SocketsProvider","props","useState","username","roomId","setRoomId","setRoomsList","useEffect","window","onfocus","document","title","on","value","message","time","hasFocus","Provider","MessagesContainer","tempMessage","setTempMessage","messageEndRef","useRef","current","scrollIntoView","behavior","className","styles","wrapper","messageList","map","index","ownMessage","messageInner","messageSender","messageBody","ref","messageBox","rows","placeholder","onChange","e","currentTarget","onClick","String","trim","emit","date","Date","getHours","getMinutes","RoomsContainer","roomName","setRoomName","toUpperCase","createRoomWrapper","roomList","Object","keys","key","disabled","name","handleJoinRoom","Chat","tempUsername","setTempUsername","localStorage","getItem","nameInputWrapper","nameInputInner","setItem","container","Rooms","Messages","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fac7ef26.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Rooms_wrapper__3OONx\",\"createRoomWrapper\":\"Rooms_createRoomWrapper__2gH7p\",\"username\":\"Rooms_username__3LRgd\",\"roomList\":\"Rooms_roomList__1Dw-7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Chat_container__1jWwj\",\"nameInputWrapper\":\"Chat_nameInputWrapper__3LXwo\",\"nameInputInner\":\"Chat_nameInputInner__2Ugw9\"};","export const EVENTS = {\r\n    connection: 'connection',\r\n    CLIENT: {\r\n        CREATE_ROOM: 'CREATE_ROOM',\r\n        SEND_ROOM_MESSAGE: 'SEND_ROOM_MESSAGE',\r\n        JOIN_ROOM: 'JOIN_ROOM'\r\n    },\r\n    SERVER: {\r\n        ROOMS: 'ROOMS',\r\n        JOINED_ROOM: 'JOINED_ROOM',\r\n        ROOM_MESSAGE: 'ROOM_MESSAGE'\r\n    }\r\n};","/* eslint-disable @typescript-eslint/no-explicit-any,@typescript-eslint/explicit-module-boundary-types,no-unused-vars,@typescript-eslint/ban-types */\r\nimport React, {createContext, useContext, useEffect, useState} from 'react';\r\nimport io, {Socket} from 'socket.io-client';\r\nimport {SOCKET_URL} from '../config/default';\r\nimport {EVENTS} from '../config/events';\r\n\r\ninterface Context {\r\n    socket: Socket\r\n    username?: string | null\r\n    setUsername: (name: string) => void\r\n    messages?: Array<{ message: string, time: string, username: string }>\r\n    setMessages: Function\r\n    roomId?: string\r\n    roomsList: Record<string, { name: string }>\r\n}\r\n\r\nconst socket = io(SOCKET_URL);\r\n\r\nconst SocketsContext = createContext<Context>(\r\n    {socket, setUsername: () => false, roomsList: {}, messages: [], setMessages: () => false}\r\n);\r\n\r\nconst SocketsProvider = (props: any) => {\r\n    const [username, setUsername] = useState('');\r\n    const [roomId, setRoomId] = useState('');\r\n    const [roomsList, setRoomsList] = useState({});\r\n    const [messages, setMessages] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        window.onfocus = () => {\r\n            document.title = 'Chat API';\r\n        };\r\n    }, []);\r\n\r\n    socket.on(EVENTS.SERVER.ROOMS, (value) => {\r\n        setRoomsList(value);\r\n    });\r\n\r\n    socket.on(EVENTS.SERVER.JOINED_ROOM, (value) => {\r\n        setRoomId(value);\r\n        setMessages([]);\r\n    });\r\n\r\n    socket.on(EVENTS.SERVER.ROOM_MESSAGE, ({message, username, time}) => {\r\n        if (!document.hasFocus()) {\r\n            document.title = 'New message...';\r\n        }\r\n\r\n        setMessages([\r\n            ...messages, {message, username, time}\r\n        ]);\r\n    });\r\n\r\n    return (\r\n        <SocketsContext.Provider value={{socket, username, setUsername, roomId, roomsList, messages, setMessages}}  {...props}/>\r\n    );\r\n};\r\n\r\nexport const useSockets = (): Context => useContext(SocketsContext);\r\n\r\nexport default SocketsProvider;\r\n","export const SOCKET_URL = 'https://glacial-castle-34924.herokuapp.com/';","import React, {ReactElement, useEffect, useRef, useState} from 'react';\r\nimport {useSockets} from '../../context/socket.context';\r\nimport {EVENTS} from '../../config/events';\r\nimport styles from './Messages.module.css';\r\n\r\nconst MessagesContainer = (): ReactElement => {\r\n\r\n    const {socket, messages, roomId, username, setMessages} = useSockets();\r\n    const [tempMessage, setTempMessage] = useState('');\r\n    const messageEndRef = useRef<null | HTMLDivElement>(null);\r\n\r\n    const handleSendMessage = () => {\r\n        if (!String(tempMessage).trim()) return;\r\n\r\n        const message = tempMessage;\r\n        socket.emit(EVENTS.CLIENT.SEND_ROOM_MESSAGE, {roomId, message, username});\r\n\r\n        const date = new Date();\r\n\r\n        if (messages) {\r\n            setMessages([\r\n                ...messages,\r\n                {\r\n                    username: 'You',\r\n                    message,\r\n                    time: `${date.getHours()}:${date.getMinutes()}`\r\n                }\r\n            ]);\r\n        }\r\n\r\n        setTempMessage('');\r\n    };\r\n\r\n    useEffect(() => {\r\n        messageEndRef.current?.scrollIntoView({behavior: 'smooth'});\r\n    }, [messages]);\r\n\r\n    if (!roomId) return <div/>;\r\n\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <div className={styles.messageList}>\r\n                {\r\n                    messages?.map(({message, username, time}, index) => {\r\n                        return (\r\n                            <div key={index} className={username === 'You' ? styles.ownMessage : styles.message}>\r\n                                <div className={styles.messageInner}>\r\n                                    <span className={styles.messageSender}>{username} - {time}</span>\r\n                                    <span className={styles.messageBody}>{message}</span>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })\r\n                }\r\n                <div ref={messageEndRef}/>\r\n            </div>\r\n            <div className={styles.messageBox}>\r\n                <textarea rows={1} placeholder='Tape your message' value={tempMessage} onChange={(e) => setTempMessage(e.currentTarget.value)}/>\r\n                <button onClick={handleSendMessage}>Send</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MessagesContainer;","import React, {useState} from 'react';\r\nimport {useSockets} from '../../context/socket.context';\r\nimport {EVENTS} from '../../config/events';\r\nimport styles from './Rooms.module.css';\r\n\r\nconst RoomsContainer: React.FC<PropsType> = ({username}) => {\r\n    const {socket, roomId, roomsList} = useSockets();\r\n    const [roomName, setRoomName] = useState('');\r\n\r\n    const handleCreateRoom = () => {\r\n        if (!String(roomName).trim()) return;\r\n        socket.emit(EVENTS.CLIENT.CREATE_ROOM, {roomName});\r\n        setRoomName('');\r\n    };\r\n\r\n    const handleJoinRoom = (key: string) => {\r\n        if (key === roomId) return;\r\n        socket.emit(EVENTS.CLIENT.JOIN_ROOM, key);\r\n    };\r\n\r\n    return (\r\n        <nav className={styles.wrapper}>\r\n            <h3 className={styles.username}>{username.toUpperCase()}</h3>\r\n            <div className={styles.createRoomWrapper}>\r\n                <div>\r\n                    <input className='inp' placeholder='Room name' value={roomName} onChange={(e) => {\r\n                        setRoomName(e.currentTarget.value);\r\n                    }}/>\r\n                    <button className='btn' onClick={handleCreateRoom}>create room</button>\r\n                </div>\r\n            </div>\r\n            <ul className={styles.roomList}>\r\n                {\r\n                    Object.keys(roomsList).map((key) => {\r\n                        return (\r\n                            <div key={key}>\r\n                                <button disabled={key === roomId} title={`Join ${roomsList[key].name}`} onClick={() => handleJoinRoom(key)}>\r\n                                    {roomsList[key].name} ➡\r\n                                </button>\r\n                            </div>\r\n                        );\r\n                    })\r\n                }\r\n            </ul>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default RoomsContainer;\r\n\r\ntype PropsType = {\r\n    username: string\r\n}","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport React, {ReactElement, useEffect, useState} from 'react';\r\nimport {useSockets} from '../context/socket.context';\r\nimport MessagesContainer from './Messages/Messages';\r\nimport styles from './Chat.module.css';\r\nimport RoomsContainer from './Rooms/Rooms';\r\n\r\nconst Chat = (): ReactElement => {\r\n    const {socket, username, setUsername} = useSockets();\r\n    const [tempUsername, setTempUsername] = useState('');\r\n\r\n    const handleSetUsername = () => {\r\n        if (!tempUsername) return;\r\n        setUsername(tempUsername);\r\n        localStorage.setItem('username', tempUsername);\r\n        setTempUsername('');\r\n    };\r\n\r\n    useEffect(() => {\r\n        setTempUsername(localStorage.getItem('username') || '');\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            {!username &&\r\n            <div className={styles.nameInputWrapper}>\r\n                <div className={styles.nameInputInner}>\r\n                    <input className='inp' placeholder='Username' value={tempUsername} onChange={(e) => {\r\n                        setTempUsername(e.currentTarget.value);\r\n                    }}/>\r\n                    <button className='btn' onClick={handleSetUsername}>start</button>\r\n                </div>\r\n            </div>\r\n            }\r\n\r\n            {username &&\r\n            <div className={styles.container}>\r\n                <RoomsContainer username={username}/>\r\n                <MessagesContainer/>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;","import React, {ReactElement} from 'react';\nimport SocketsProvider from './context/socket.context';\nimport Chat from './components/Chat';\nimport './global.css';\n\nfunction App(): ReactElement {\n    return (\n        <SocketsProvider>\n            <Chat/>\n        </SocketsProvider>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Messages_wrapper__2TnFf\",\"messageList\":\"Messages_messageList__5nrdQ\",\"message\":\"Messages_message__3jW7V\",\"ownMessage\":\"Messages_ownMessage__1i86v\",\"messageInner\":\"Messages_messageInner__2foZu\",\"messageSender\":\"Messages_messageSender__3WEoX\",\"messageBody\":\"Messages_messageBody__3H5uc\",\"messageBox\":\"Messages_messageBox__y7rJg\"};"],"sourceRoot":""}